<!DOCTYPE html>
<html lang="es">
<head>
  <div id="sugerenciasFinancieras"></div>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>dashboard de finanzas</title>
  <link rel="stylesheet" href="style/main.css" />
  <script defer src="js/finanzas.js"></script>
  <style>
    body {
      background: #131619;
      color: #e6fff9;
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    .main-panel {
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: flex-start;
      gap: 32px;
      margin: 22px 0 0 0;
      padding: 0 16px 40px 16px;
      min-height: 92vh;
    }
    .col-izq {
      flex: 1 1 630px;
      max-width: 700px;
      min-width: 400px;
      background: #181e23;
      border-radius: 16px;
      box-shadow: 0 1px 24px #0008;
      padding: 32px 30px 32px 30px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }
    .col-der {
      flex: 1 1 400px;
      max-width: 430px;
      min-width: 270px;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    h1, h2 {
      color: #18f8b6;
      margin-top: 0.2em;
      margin-bottom: 0.6em;
      font-size: 2em;
      letter-spacing: 1.2px;
    }
    h2 {
      color: #fde047;
      font-size: 1.19em;
      margin-bottom: 10px;
      margin-top: 0;
    }
    label {
      color: #dde2f7;
      font-size: 1em;
      margin-right: 7px;
    }
    #registroForm {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 18px;
      margin-top: 6px;
      background: #21272d;
      padding: 18px 20px 13px 20px;
      border-radius: 12px;
      box-shadow: 0 1px 8px #0004;
    }
    .input-row {
      display: flex;
      flex-direction: column;
      margin-bottom: 0;
    }
    .input-row label {
      font-size: 1.03em;
      font-weight: 600;
      margin-bottom: 4px;
      margin-right: 0;
    }
    #registroForm input[type="number"] {
      padding: 10px 9px;
      font-size: 1.07em;
      border-radius: 8px;
      border: 2px solid #27ffe5;
      background: #212c33;
      color: #00ffe1;
      outline: none;
      margin-bottom: 0;
      margin-right: 0;
      transition: border 0.19s;
      box-shadow: 0 1px 6px #0003;
    }
    #registroForm input[type="number"]:focus {
      border: 2.2px solid #f5d553;
      background: #23343b;
      color: #fff;
    }
    #registroForm select {
      padding: 9px 6px;
      font-size: 1.05em;
      border-radius: 8px;
      border: 1.6px solid #19e7bb;
      background: #212c33;
      color: #61ffbb;
      min-width: 110px;
      margin-bottom: 0;
      margin-right: 0;
      transition: border 0.19s;
      box-shadow: 0 1px 6px #0002;
    }
    #registroForm select:focus {
      border: 2px solid #f5d553;
      background: #23343b;
      color: #fff;
    }
    #registroForm button {
      padding: 10px 15px;
      font-size: 1.08em;
      border-radius: 8px;
      margin-top: 8px;
      min-width: 120px;
    }
    .filtros-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 14px 16px;
      margin-bottom: 8px;
    }
    .resumen-flujo {
      font-size: 1.06em;
      font-weight: bold;
      color: #abffbc;
      background: #222e28;
      border-radius: 8px;
      padding: 9px 13px;
      margin: 13px 0 9px 0;
    }
    table#tablaHistorial {
      width: 100%;
      border-collapse: collapse;
      background: #181d22;
      font-size: .97em;
      margin-top: 6px;
    }
    #tablaHistorial thead th {
      color: #18f8b6;
      background: #232c36;
      font-size: 1em;
      font-weight: bold;
      padding: 4px 2px;
    }
    #tablaHistorial tbody td {
      text-align: center;
      color: #e0e7ef;
      padding: 6px 3px;
      border-bottom: 1px solid #1e2330;
    }
    .bloque-panel {
      background: #181d22;
      border-radius: 16px;
      box-shadow: 0 1px 14px #0007;
      padding: 18px 14px 13px 14px;
      margin-bottom: 6px;
    }
    .grafico-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .lobezno-container img {
      width: 86px;
      margin-top: 9px;
      border-radius: 14px;
      box-shadow: 0 1px 12px #0005;
      background: #212226;
    }
    .lobezno-container p {
      color: #60f572;
      margin: 0.5em 0 0 0;
      font-size: 1.03em;
      font-weight: bold;
    }
    @media (max-width: 1100px) {
      .main-panel { flex-direction: column; align-items: stretch; gap: 14px; }
      .col-der, .col-izq { max-width: 100vw; min-width: unset; }
    }
    @media (max-width: 670px) {
      .main-panel { flex-direction: column; padding: 0 2vw 24px 2vw;}
      .col-izq, .col-der, .bloque-panel { padding: 10px 3px 13px 3px; }
      #registroForm { padding: 9px 4px 8px 4px;}
      .resumen-flujo { font-size: .98em;}
    }
  </style>
</head>
<body>
  <!-- BOTONES DE NAVEGACIÓN -->
  <div class="nav-bar">
    <button class="btn-principal" onclick="window.location.href='index.html'">← menú principal</button>
    <button class="btn-principal" onclick="window.location.href='desafios.html'">ir a desafíos</button>
    <button class="btn-principal" id="botoncalculadorapro" style="display:none;" onclick="window.location.href='calculadora-pro.html'">calculadora pro de inversiones</button>
  </div>
  <div class="main-panel">
    <!-- Columna Izquierda -->
    <div class="col-izq">
      <h1>finanzas conscientes</h1>
      <form id="registroForm">
        <div class="input-row">
          <label for="monto">Monto:</label>
          <input type="number" id="monto" placeholder="Monto" required />
        </div>
        <div class="input-row">
          <label for="tipoMovimiento">Tipo de movimiento:</label>
          <select id="tipoMovimiento">
            <option value="ingreso">ingreso</option>
            <option value="gasto">gasto</option>
          </select>
        </div>
        <div class="input-row">
          <label for="categoria">Categoría:</label>
          <select id="categoria" style="min-width:130px;">
            <option value="activos">activos</option>
            <option value="necesidades">necesidades</option>
            <option value="ocio">ocio</option>
            <option value="salario">salario</option>
            <option value="extra">extra</option>
          </select>
        </div>
        <button type="submit" class="btn-principal">registrar</button>
      </form>
      <div class="filtros-row">
        <label for="filtroMes">Filtrar por mes:</label>
        <select id="filtroMes">
          <option value="todos">todos</option>
          <option value="0">enero</option>
          <option value="1">febrero</option>
          <option value="2">marzo</option>
          <option value="3">abril</option>
          <option value="4">mayo</option>
          <option value="5">junio</option>
          <option value="6">julio</option>
          <option value="7">agosto</option>
          <option value="8">septiembre</option>
          <option value="9">octubre</option>
          <option value="10">noviembre</option>
          <option value="11">diciembre</option>
        </select>
        <label for="filtroCategoria">Filtrar por categoría:</label>
        <select id="filtroCategoria">
          <option value="todos">todas</option>
          <option value="activos">activos</option>
          <option value="necesidades">necesidades</option>
          <option value="ocio">ocio</option>
          <option value="salario">salario</option>
          <option value="extra">extra</option>
        </select>
      </div>
      <div id="resumenFlujo" class="resumen-flujo"></div>
      <table id="tablaHistorial">
        <thead>
          <tr>
            <th style="padding:4px 2px;width:60px;">monto</th>
            <th style="padding:4px 2px;width:46px;">tipo</th>
            <th style="padding:4px 2px;width:95px;">categoría</th>
            <th style="padding:4px 2px;width:74px;">fecha</th>
            <th style="padding:4px 2px;width:62px;">acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <!-- Columna Derecha -->
    <div class="col-der">
      <div class="bloque-panel grafico-container">
        <h2>estado del flujo</h2>
        <canvas id="graficoFinanzas" width="200" height="200"></canvas>
      </div>
      <div class="bloque-panel grafico-container">
        <h2>evolución del saldo</h2>
        <canvas id="graficoEvolucionSaldo" height="130"></canvas>
      </div>
      <div class="bloque-panel lobezno-container">
        <h2>estado del lobezno</h2>
        <img id="imgLobezno" src="assets/img/lobezno-balanceado.png" alt="lobezno" />
        <p id="fraseLobezno">tu economía está en equilibrio. el camino es claro.</p>
      </div>
    </div>
  </div>
  <script>
    // Mostrar Calculadora PRO si está desbloqueada
    if (localStorage.getItem("calcavanzada") === "1") {
      document.getElementById("botoncalculadorapro").style.display = "inline-block";
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/chart.umd.min.js"></script>
</body>
</html>
